<dialog #dialogRef class="modal modal-bottom sm:modal-middle">
    <div class="modal-box border border-base-300 shadow-2xl text-base-content">
        <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2" (click)="close()">
            <lucide-icon [img]="icons.close" size="18"></lucide-icon>
        </button>

        <h3 class="font-bold text-2xl flex items-center gap-2 mb-2">
            <div class="p-2 bg-warning/20 rounded-lg text-warning">
                <lucide-icon [img]="icons.crown" size="24"></lucide-icon>
            </div>
            Tasquery Pro
        </h3>

        <p class="text-base-content/80 text-sm mb-6">
            Join the waitlist for early access and a <strong>50% early-bird discount</strong>.
        </p>

        <div class="flex flex-col gap-4">

            <div class="form-control w-full">
                <label class="label"><span class="label-text font-semibold">Your Email</span></label>
                <input type="email"
                       placeholder="hello@example.com"
                       class="input input-bordered w-full"
                       [class.input-error]="emailInput.invalid && emailInput.touched"
                       [(ngModel)]="email"
                       #emailInput="ngModel"
                       required
                       pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" />
            </div>

            <div class="form-control w-full">
                <label class="label"><span class="label-text font-semibold">What feature do you need the most? (Optional)</span></label>
                <div class="flex flex-col gap-2 p-3 bg-base-200/50 rounded-xl border border-base-300">
                    @for (feature of proFeatures; track feature.id) {
                        <label class="label cursor-pointer justify-start gap-3 hover:bg-base-200 p-2 rounded-lg transition-colors">
                            <input type="radio"
                                   name="feature-radio"
                                   class="radio radio-primary radio-sm"
                                   [value]="feature.id"
                                   [(ngModel)]="selectedFeature" />
                            <span class="label-text">{{ feature.label }}</span>
                        </label>
                    }
                </div>
            </div>

            <button class="btn btn-primary w-full mt-2"
                    [disabled]="emailInput.invalid || isSubmitting()"
                    (click)="submit()">
                @if (isSubmitting()) {
                    <span class="loading loading-spinner"></span>
                } @else {
                    Join the Waitlist
                }
            </button>
        </div>
    </div>

    <form method="dialog" class="modal-backdrop">
        <button (click)="close()">close</button>
    </form>
</dialog>
